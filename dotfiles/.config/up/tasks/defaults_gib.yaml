run_if_cmd: ["/bin/sh", "-cex", '[ "$(whoami)" = gib -a "$(uname)" = Darwin ] || exit 204']
run_lib: defaults
data:
  NSGlobalDomain:
    # Set up fastest key repeat rate (needs relogin).
    KeyRepeat: 1
    # Sets a low time before key starts repeating.
    InitialKeyRepeat: 8

    # Use Dark mode.
    AppleInterfaceStyle: Dark
    # Don't brighten window contents (better contrast in Dark Mode).
    # System Preferences > General > Allow wallpaper tinting in windows (true here means uncheck the tickbox).
    AppleReduceDesktopTinting: true

    # Auto-hide menu bar.
    _HIHideMenuBar: true

    # Add a context menu item for showing the Web Inspector in web views
    WebKitDeveloperExtras: true

    # Disable the animations for opening Quick Look windows
    QLPanelAnimationDuration: 0.0

    # Set sidebar icon size to medium
    NSTableViewDefaultSizeMode: 2

    NSUserKeyEquivalents:
      # Create global shortcut "Merge all windows" ⌘-M
      "Merge All Windows": '@$m'

  com.apple.dock:
    # Auto-hide dock.
    autohide: true

    # Have the Dock only show apps currently running.
    static-only: true

    # Make the dock appear instantly.
    # https://simcityltd.medium.com/how-to-get-the-perfect-macos-dock-b2593f9c0f0b
    autohide-delay: 0.0
    autohide-time-modifier: 0.25

  com.apple.finder:
    # Allow Finder to be quit (hides Desktop files).
    QuitMenuItem: 1
    # Don't show Desktop icons (hide the desktop view).
    CreateDesktop: false

  com.apple.ActivityMonitor:
    # Show all processes in Activity Monitor
    ShowCategory: 0

  com.apple.HIToolbox:
    # Enable dictation with double-tap of Fn button.
    AppleDictationAutoEnable: 1
    # System Preferences > Keyboard > Press Function key to: Start Dictation.
    #                               > Press and hold Fn key to: Show F1, F2, F3 Keys.
    AppleFnUsageType: 3

  com.apple.MobileSMS:
    # Messages > Preferences > Keep messages: Forever.
    KeepMessageForDays: 0

  com.apple.Safari:
    # Enable Safari’s debug menu
    IncludeInternalDebugMenu: true
    # Enable Safari’s debug menu
    # Prevent Safari from opening ‘safe’ files automatically after downloading
    AutoOpenSafeDownloads: false
    # Default to saving files in ~/tmp.
    NSNavLastRootDirectory: '~/tmp'
    # Safari > Preferences > General > Safari opens with: All non-private windows from last session.
    OpenPrivateWindowWhenNotRestoringSessionAtLaunch: false
    # Make Safari’s search banners default to Contains instead of Starts With
    FindOnPageMatchesWordStartsOnly: false

  com.apple.Spotlight:
    orderedItems:
    - enabled: true
      name: APPLICATIONS # Open Applications.
    - enabled: true
      name: SYSTEM_PREFS # Open System Preferences panes.
    - enabled: true
      name: BOOKMARKS # Open Safari Bookmarks and History.
    - enabled: true
      name: MENU_DEFINITION # Define words.
    - enabled: true
      name: MENU_EXPRESSION # Inline Calculator.
    - enabled: true
      name: MENU_CONVERSION # Currency Conversion.
    - enabled: false
      name: DIRECTORIES
    - enabled: false
      name: PDF
    - enabled: false
      name: FONTS
    - enabled: false
      name: DOCUMENTS
    - enabled: false
      name: MESSAGES
    - enabled: false
      name: CONTACT
    - enabled: false
      name: EVENT_TODO
    - enabled: false
      name: IMAGES
    - enabled: false
      name: MUSIC
    - enabled: false
      name: MOVIES
    - enabled: false
      name: PRESENTATIONS
    - enabled: false
      name: SPREADSHEETS
    - enabled: false
      name: SOURCE
    - enabled: false
      name: MENU_OTHER
    - enabled: false
      name: MENU_WEBSEARCH
    - enabled: false
      name: MENU_SPOTLIGHT_SUGGESTIONS
