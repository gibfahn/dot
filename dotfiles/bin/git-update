#!/usr/bin/env bash

set -eu

# Fetch everything.
git fetch --all --quiet

# Try to update current branch, don't worry if there are uncommitted changes or it fails.
# Mostly to placate `git unpushed`.
git merge --quiet --ff-only && true

# Clean up stale PR branches.
git bp --force --quiet

# Show unpushed changes (but trim the output, otherwise it can be extremely long).
git unpushed

# List in-progress branches.
git branch --remotes --list '*fork/*' | grep -v 'fork/old'
